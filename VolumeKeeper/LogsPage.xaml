<Page x:Class="VolumeKeeper.LogsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:VolumeKeeper"
      xmlns:services="using:VolumeKeeper.Services">

    <Grid Padding="24,12,24,24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title Section -->
        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <TextBlock Text="Activity Log" 
                       Style="{ThemeResource TitleTextBlockStyle}"
                       Margin="0,0,0,4"/>
            <TextBlock Text="Real-time updates of volume changes and application events"
                       Style="{ThemeResource CaptionTextBlockStyle}"
                       Opacity="0.6"/>
        </StackPanel>

        <!-- Controls Section -->
        <StackPanel Grid.Row="1" 
                    Orientation="Horizontal" 
                    Spacing="12"
                    Margin="0,0,0,16">
            <Button x:Name="ClearLogsButton" Click="ClearLogsButton_Click">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <SymbolIcon Symbol="Clear"/>
                    <TextBlock Text="Clear Logs"/>
                </StackPanel>
            </Button>
            
            <ToggleSwitch x:Name="AutoScrollToggle" 
                          Header="Auto-scroll"
                          IsOn="True"
                          Margin="16,0,0,0"/>
        </StackPanel>

        <!-- Log List -->
        <ScrollViewer x:Name="LogScrollViewer" 
                      Grid.Row="2"
                      VerticalScrollBarVisibility="Auto">
            <ItemsRepeater x:Name="LogsRepeater" ItemsSource="{x:Bind LogEntries}">
                <ItemsRepeater.ItemTemplate>
                    <DataTemplate x:DataType="services:LogEntry">
                        <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="0,0,0,1"
                                Padding="16,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Timestamp -->
                                <TextBlock Grid.Column="0" 
                                           Text="{x:Bind FormattedTime}" 
                                           Style="{ThemeResource CaptionTextBlockStyle}"
                                           Opacity="0.6"
                                           VerticalAlignment="Center"/>

                                <!-- Icon -->
                                <SymbolIcon Grid.Column="1" 
                                            Symbol="{x:Bind IconSymbol}" 
                                            Foreground="{x:Bind TypeColor, Mode=OneTime}"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>

                                <!-- Message -->
                                <TextBlock Grid.Column="2" 
                                           Text="{x:Bind Message}" 
                                           TextWrapping="Wrap"
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsRepeater.ItemTemplate>
                
                <ItemsRepeater.Layout>
                    <StackLayout Spacing="0" Orientation="Vertical"/>
                </ItemsRepeater.Layout>
            </ItemsRepeater>
        </ScrollViewer>

        <!-- Empty State -->
        <StackPanel x:Name="EmptyState"
                    Grid.Row="2"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Spacing="16"
                    Visibility="Collapsed">
            <SymbolIcon Symbol="List" 
                        RenderTransformOrigin="0.5,0.5">
                <SymbolIcon.RenderTransform>
                    <CompositeTransform ScaleX="4" ScaleY="4"/>
                </SymbolIcon.RenderTransform>
            </SymbolIcon>
            <TextBlock Text="No activity yet" 
                       Style="{ThemeResource SubtitleTextBlockStyle}"
                       Opacity="0.6"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Volume changes and events will appear here"
                       Style="{ThemeResource CaptionTextBlockStyle}"
                       Opacity="0.4"
                       HorizontalAlignment="Center"/>
        </StackPanel>
    </Grid>
</Page>